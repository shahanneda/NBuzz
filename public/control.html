<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="./materialize.min.css" rel="stylesheet" type="text/css" />
    <title>Control</title>
</head>

<body>
    <div class="header">


    </div>
    <div class="buzzlistWrapper">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody id="buzzTableBody">

            </tbody>
        </table>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var url = window.location.href;
        var url = url.substr(0, url.lastIndexOf("/"));//this is to remove the /control
        var socket = io(url);

        socket.on('connect', function () {
            console.log("connected!");
        });

        socket.on("buzzListUpdate", function (data) {
            let buzzTableBody = document.getElementById("buzzTableBody");
            buzzTableBody.innerHTML = "";
            data.buzzList.map(function (value, index) {
                buzzTableBody.innerHTML += "<tr>\
                    <td>"+ value.sender + "</td>\
                    <td>"+ value.time + "</td>\
                </tr>";
            });
            console.log(data);
        });

    </script>
</body>


</html>